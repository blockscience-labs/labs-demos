"use strict";(self.webpackChunklabs_jupyterlab_extension=self.webpackChunklabs_jupyterlab_extension||[]).push([[763],{763:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var o=n(991),a=n(992),l=n(912),i=n(7),s=n(19),r=n(748);const c={id:"publish-document",autoStart:!0,requires:[i.IFileBrowserFactory],activate:(e,t)=>{e.commands.addCommand("labs-jupyterlab-extension/context-menu:publish",{label:"Publish Document",caption:"Publish shareable document to the BlockScience Labs platform.",icon:l.fileUploadIcon,execute:()=>{const e=t.tracker.currentWidget.selectedItems().next();(0,o.showDialog)({title:"Publication Visibility",body:"Publishing this document will make it visible to the world. Is this OK?",buttons:[o.Dialog.cancelButton(),o.Dialog.warnButton({label:"Publish"})]}).then((t=>{t.button.accept&&async function(e="",t={}){const n=r.ServerConnection.makeSettings(),o=s.URLExt.join(n.baseUrl,"labs-jupyterlab-extension",e);let a;try{a=await r.ServerConnection.makeRequest(o,t,n)}catch(e){throw new r.ServerConnection.NetworkError(e)}let l=await a.text();if(l.length>0)try{l=JSON.parse(l)}catch(e){console.log("Not a JSON response body.",a)}if(!a.ok)throw new r.ServerConnection.ResponseError(a,l.message||l);return l}("publish-document",{method:"POST",body:JSON.stringify({file:e.name,path:e.path})}).then((e=>{let t=document.createElement("div");t.innerHTML=`<span>Your document can be found <a href="${e.publicationURL}" target="_blank" style="text-decoration: underline; font-weight: bold;">here</a>.</span>`,(0,o.showDialog)({title:"Successfully Published!",body:new a.Widget({node:t}),buttons:[o.Dialog.okButton()]}).then((e=>{e.button})).catch((e=>console.log(e)))})).catch((e=>{console.error(`The labs_jupyterlab_extension threw an error:\n${e}`)}))})).catch((e=>console.log(e)))}})}}}}]);